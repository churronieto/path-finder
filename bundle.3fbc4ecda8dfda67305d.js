!function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var o=function(){return(o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<i;e++)for(var n=arguments[e],a=0,l=n.length;a<l;a++,r++)o[r]=n[a];return o},n=function(){function t(){}return t._config=null,t.getConfig=function(){return null==t._config&&(t._config={algorithm:o(o({},t.currentConfiguration.algorithm),{discoveryPath:r(t.currentConfiguration.algorithm.discoveryPath)}),world:o(o({},t.currentConfiguration.world),{theme:{path:o({},t.currentConfiguration.world.theme.path),start:o({},t.currentConfiguration.world.theme.start),end:o({},t.currentConfiguration.world.theme.end),rock:o({},t.currentConfiguration.world.theme.rock),route:o({},t.currentConfiguration.world.theme.route),visited:o({},t.currentConfiguration.world.theme.visited)}})}),t._config},t.currentConfiguration={algorithm:{discoveryPath:["⭠","⭡","⭢","⭣"],showTilePosition:!1,highlightPathMs:2,animatePathFromStartToEnd:!0,animateRoute:!1,showRoute:!0,animateVisited:!1,showVisited:!1,showVisitedOrderNumbers:!1},world:{tileSize:30,rows:100,columns:100,obstacleRate:.3,theme:{path:{pathFillStyle:"#608190",fontFillStyle:"#2d3436",fontSize:20},start:{pathFillStyle:"#f80000",fontFillStyle:"#2d3436",fontSize:20},end:{pathFillStyle:"#f8f848",fontFillStyle:"#f8f848",fontSize:20},rock:{pathFillStyle:"#2a3f54",fontFillStyle:"white",fontSize:20},route:{pathFillStyle:"#f8e8b0",fontFillStyle:"#2d3436",fontSize:20},visited:{pathFillStyle:"#3688f8",fontFillStyle:"#2c2c54",fontSize:20}}}},t.setDimensions=function(e,i){t.currentConfiguration.world.columns=e,t.currentConfiguration.world.rows=i||e,t._config=null},t.setSkipVisited=function(){t.currentConfiguration.algorithm.animatePathFromStartToEnd=!0,t.currentConfiguration.algorithm.animateRoute=!0,t.currentConfiguration.algorithm.showRoute=!0,t.currentConfiguration.algorithm.showVisited=!1,t._config=null},t.setAnimate=function(){t.currentConfiguration.algorithm.animatePathFromStartToEnd=!1,t.currentConfiguration.algorithm.animateRoute=!0,t.currentConfiguration.algorithm.showRoute=!0,t.currentConfiguration.algorithm.animateVisited=!0,t.currentConfiguration.algorithm.showVisited=!0,t._config=null},t.skipVisitedAnimation=function(){t.currentConfiguration.algorithm.animatePathFromStartToEnd=!0,t.currentConfiguration.algorithm.animateRoute=!0,t.currentConfiguration.algorithm.showRoute=!0,t.currentConfiguration.algorithm.animateVisited=!1,t.currentConfiguration.algorithm.showVisited=!0,t._config=null},t.setSkipAnimations=function(){t.currentConfiguration.algorithm.animateRoute=!1,t.currentConfiguration.algorithm.showRoute=!0,t.currentConfiguration.algorithm.animateVisited=!1,t.currentConfiguration.algorithm.showVisited=!0,t._config=null},t}(),a=function(){function t(t,e){var i=this;this.renderWorld=function(){for(var t=0;t<i.world.tiles.length;t++)i.drawTile(i.world.tiles[t],t)},this.drawTile=function(t,e){var o=Math.floor(e/i.world.rows)*n.getConfig().world.tileSize,r=e%i.world.rows*n.getConfig().world.tileSize;switch(t.type){case"ROCK":i.drawRock(r,o,n.getConfig().world.theme.rock);break;case"PATH":i.drawPath(r,o,n.getConfig().world.theme.path);break;case"START":i.drawPath(r,o,n.getConfig().world.theme.start);break;case"END":i.drawPath(r,o,n.getConfig().world.theme.end)}n.getConfig().algorithm.showTilePosition&&i.drawPathId(r,o,""+e)},this.highlightTile=function(t,e,o,r){var a=Math.floor(e/i.world.rows)*n.getConfig().world.tileSize,l=e%i.world.rows*n.getConfig().world.tileSize;switch(t.type){case"ROCK":i.drawRock(l,a,n.getConfig().world.theme.visited);break;case"PATH":i.drawPath(l,a,o);break;case"START":i.drawPath(l,a,n.getConfig().world.theme.start);break;case"END":i.drawPath(l,a,n.getConfig().world.theme.end)}n.getConfig().algorithm.showVisitedOrderNumbers&&r&&i.drawPathId(l,a,""+r)},this.highlightPathSlowly=function(t,e,o,r,a){e<t.length&&setTimeout((function(){i.highlightTile(t[e],t[e].position,r,""+e),i.highlightPathSlowly(t,e+1,o,r),e==t.length-1&&o&&o()}),n.getConfig().algorithm.highlightPathMs)},this.highlightPathQuickly=function(t,e,o,r,n){for(var a=0;a<t.length;a++)i.highlightTile(t[a],t[a].position,r,""+a);o&&o()},this.ctx=t,this.world=e}return t.prototype.drawRock=function(t,e,i){this.ctx.fillStyle="black",this.ctx.fillRect(t,e,n.getConfig().world.tileSize,n.getConfig().world.tileSize),this.ctx.fillStyle=i.pathFillStyle,this.ctx.fillRect(t+1,e+1,n.getConfig().world.tileSize-1,n.getConfig().world.tileSize-1)},t.prototype.drawPath=function(t,e,i){this.ctx.fillStyle="black",this.ctx.fillRect(t,e,n.getConfig().world.tileSize,n.getConfig().world.tileSize),this.ctx.beginPath(),this.ctx.fillStyle=i.pathFillStyle,this.ctx.fillRect(t+1,e+1,n.getConfig().world.tileSize-1,n.getConfig().world.tileSize-1),this.ctx.stroke()},t.prototype.drawPathId=function(t,e,i){this.ctx.font=n.getConfig().world.theme.path.fontSize+"px Arial",this.ctx.fillStyle="black",this.ctx.fillText(i,t+n.getConfig().world.tileSize/2-10,e+n.getConfig().world.tileSize/2+10)},t}(),l=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<i;e++)for(var n=arguments[e],a=0,l=n.length;a<l;a++,r++)o[r]=n[a];return o},h=function(){function t(){this.array=[]}return t.prototype.offer=function(t){this.array.push(t)},t.prototype.poll=function(){return this.array.shift()},t.prototype.peek=function(){return this.array[0]},t.prototype.size=function(){return this.array.length},t.prototype.isEmpty=function(){return this.size()<=0},t.prototype.toArray=function(){return l(this.array)},t}(),s=function(){function t(t){var e=this;this.logs={traversalPath:[]},this.findPath=function(){var t,i=[],o=[];e.resetLogs();var r=new h;return r.offer(e.world.start),console.log("this.world.start",e.world.start),e.composePath(r,((t={})[e.world.start]=e.world.start,t),e.world.tiles,e.world.end,o,i),{route:i,pathsVisited:o}},this.composePath=function(t,i,o,r,n,a){if(!t.isEmpty()){var l=t.poll();if(n.push(o[l]),l===r)return a.push(o[l]),l;o[l].paths.forEach((function(e){null==i[e]&&(t.offer(e),i[""+e]=e)}));var h=e.composePath(t,i,o,r,n,a);return null!=h&&o[h].paths.includes(l)?(a.push(o[l]),l):h}},this.world=t}return t.prototype.resetLogs=function(){this.logs={traversalPath:[]}},t}(),u=function(){function t(){var t=this;this.generateWorld=function(e,i,o){var r=t.generateTiles(e*i,o);return t.createConnectedWorld(r,e,i)},this.createConnectedWorld=function(e,i,o){for(var r=[],n=0,a=0,l=function(i){var l={paths:[],position:i,type:e[i].type};if(r.push(l),"ROCK"===l.type)return"continue";"START"===l.type?n=i:"END"===l.type&&(a=i),["⭠","⭡","⭢","⭣"].forEach((function(r){var n=t.getPosition(e,o,i,r);null!=n&&"ROCK"!=e[n].type&&l.paths.push(n)}))},h=0;h<e.length;h++)l(h);return{columns:i,rows:o,tiles:r,start:n,end:a}},this.getPosition=function(t,e,i,o){switch(o){case"⭠":return i%e>0?i-1:null;case"⭢":return i<t.length-1&&i%e<e-1?i+1:null;case"⭡":return i-e<0?null:i-e;case"⭣":return i+e>t.length-1?null:i+e}}}return t.prototype.generateTiles=function(t,e){var i=Math.floor(t*e),o=this.generatePaths(t);this.generateRocks(o,i);var r=Math.floor(Math.random()*t);o[r].type="START";var n=Math.floor(Math.random()*t);return o[n=n==r?(n+3)%t:n].type="END",o},t.prototype.generatePaths=function(t){for(var e=[],i=0;i<t;i++)e.push({type:"PATH"});return e},t.prototype.generateRocks=function(t,e){for(var i=0;i<e;i++){t[Math.floor(Math.random()*(t.length-1))].type="ROCK"}},t}(),f=new(function(){function t(){this.setMode=function(t){switch(t){case"skipVisited":n.setSkipVisited();break;case"animate":n.setAnimate();break;case"skipAnimations":n.setSkipAnimations();break;case"skipVisitedAnimation":n.skipVisitedAnimation();break;default:n.setAnimate()}}}return t.prototype.initialize=function(){var t=document.getElementById("myCanvas");t.height=window.innerHeight-4,t.width=window.innerWidth-4;var e=t.getContext("2d");this.setConfiguration(),this.world=(new u).generateWorld(n.getConfig().world.columns,n.getConfig().world.rows,n.getConfig().world.obstacleRate),this.worldRender=new a(e,this.world),this.pathFinder=new s(this.world),this.worldRender.renderWorld()},t.prototype.setConfiguration=function(){var t=new URLSearchParams(window.location.search);this.setMode(t.get("mode"));var e=t.has("rows")?+t.get("rows"):Math.floor(window.innerWidth/n.getConfig().world.tileSize),i=t.has("columns")?+t.get("columns"):Math.floor(window.innerHeight/n.getConfig().world.tileSize);n.setDimensions(i,e)},t.prototype.solve=function(){var t,e=this,i=this.pathFinder.findPath(),o=function(){};if(n.getConfig().algorithm.showRoute){var r=n.getConfig().algorithm.animatePathFromStartToEnd?i.route.reverse():i.route;o=n.getConfig().algorithm.animateRoute?function(){e.worldRender.highlightPathSlowly(r,0,null,n.getConfig().world.theme.route)}:function(){e.worldRender.highlightPathQuickly(r,0,null,n.getConfig().world.theme.route)}}n.getConfig().algorithm.showVisited&&(t=n.getConfig().algorithm.animateVisited?function(){e.worldRender.highlightPathSlowly(i.pathsVisited,0,o,n.getConfig().world.theme.visited)}:function(){e.worldRender.highlightPathQuickly(i.pathsVisited,0,o,n.getConfig().world.theme.visited)}),t?t():o()},t}());f.initialize(),f.solve()}]);