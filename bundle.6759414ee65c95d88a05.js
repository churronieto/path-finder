!function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var o=function(){return(o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<i;e++)for(var n=arguments[e],l=0,a=n.length;l<a;l++,r++)o[r]=n[l];return o},n=function(){function t(){}return t.getConfig=function(){return null==t._config&&(t._config={algorithm:o(o({},t.currentConfiguration.algorithm),{discoveryPath:r(t.currentConfiguration.algorithm.discoveryPath)}),world:o(o({},t.currentConfiguration.world),{theme:{path:o({},t.currentConfiguration.world.theme.path),start:o({},t.currentConfiguration.world.theme.start),end:o({},t.currentConfiguration.world.theme.end),rock:o({},t.currentConfiguration.world.theme.rock),route:o({},t.currentConfiguration.world.theme.route),visited:o({},t.currentConfiguration.world.theme.visited)}})}),t._config},t.setDimensions=function(e,i){t.currentConfiguration.world.columns=e,t.currentConfiguration.world.rows=i||e,t._config=null},t.setSkipVisited=function(){t.currentConfiguration.algorithm.animatePathFromStartToEnd=!0,t.currentConfiguration.algorithm.animateRoute=!0,t.currentConfiguration.algorithm.showRoute=!0,t.currentConfiguration.algorithm.showVisited=!1,t._config=null},t.setAnimate=function(){t.currentConfiguration.algorithm.animatePathFromStartToEnd=!1,t.currentConfiguration.algorithm.animateRoute=!0,t.currentConfiguration.algorithm.showRoute=!0,t.currentConfiguration.algorithm.animateVisited=!0,t.currentConfiguration.algorithm.showVisited=!0,t._config=null},t.skipVisitedAnimation=function(){t.currentConfiguration.algorithm.animatePathFromStartToEnd=!0,t.currentConfiguration.algorithm.animateRoute=!0,t.currentConfiguration.algorithm.showRoute=!0,t.currentConfiguration.algorithm.animateVisited=!1,t.currentConfiguration.algorithm.showVisited=!0,t._config=null},t.setSkipAnimations=function(){t.currentConfiguration.algorithm.animateRoute=!1,t.currentConfiguration.algorithm.showRoute=!0,t.currentConfiguration.algorithm.animateVisited=!1,t.currentConfiguration.algorithm.showVisited=!0,t._config=null},t._config=null,t.currentConfiguration={algorithm:{discoveryPath:["⭠","⭡","⭢","⭣"],showTilePosition:!1,highlightPathMs:2,animatePathFromStartToEnd:!0,animateRoute:!1,showRoute:!0,animateVisited:!1,showVisited:!1,showVisitedOrderNumbers:!1},world:{tileSize:30,rows:100,columns:100,obstacleRate:.3,theme:{path:{pathFillStyle:"#608190",fontFillStyle:"#2d3436",fontSize:20,borderFillStyle:"black"},start:{pathFillStyle:"#f80000",fontFillStyle:"#2d3436",fontSize:20,borderFillStyle:"black"},end:{pathFillStyle:"#f8f848",fontFillStyle:"#f8f848",fontSize:20,borderFillStyle:"black"},rock:{pathFillStyle:"#2a3f54",fontFillStyle:"white",fontSize:20,borderFillStyle:"black"},route:{pathFillStyle:"#f8e8b0",fontFillStyle:"#2d3436",fontSize:20,borderFillStyle:"black"},visited:{pathFillStyle:"#3688f8",fontFillStyle:"#2c2c54",fontSize:20,borderFillStyle:"black"}}}},t}(),l=function(){function t(t,e){this.ctx=t,this.world=e}return t.prototype.renderWorld=function(){for(var t=0;t<this.world.tiles.length;t++)this.drawTile(this.world.tiles[t])},t.prototype.drawTile=function(t){var e=Math.floor(t.position/this.world.rows)*n.getConfig().world.tileSize,i=t.position%this.world.rows*n.getConfig().world.tileSize;switch(t.type){case"ROCK":this.drawRock(i,e,n.getConfig().world.theme.rock);break;case"PATH":this.drawPath(i,e,n.getConfig().world.theme.path);break;case"START":this.drawPath(i,e,n.getConfig().world.theme.start);break;case"END":this.drawPath(i,e,n.getConfig().world.theme.end)}n.getConfig().algorithm.showTilePosition&&this.drawPathId(i,e,""+t.position)},t.prototype.highlightTile=function(t,e,i){var o=Math.floor(t.position/this.world.rows)*n.getConfig().world.tileSize,r=t.position%this.world.rows*n.getConfig().world.tileSize;switch(t.type){case"ROCK":this.drawRock(r,o,n.getConfig().world.theme.rock);break;case"PATH":this.drawPath(r,o,e);break;case"START":this.drawPath(r,o,n.getConfig().world.theme.start);break;case"END":this.drawPath(r,o,n.getConfig().world.theme.end)}n.getConfig().algorithm.showVisitedOrderNumbers&&i&&this.drawPathId(r,o,""+i)},t.prototype.drawRock=function(t,e,i){this.ctx.fillStyle=i.borderFillStyle,this.ctx.fillRect(t,e,n.getConfig().world.tileSize,n.getConfig().world.tileSize),this.ctx.fillStyle=i.pathFillStyle,this.ctx.fillRect(t+1,e+1,n.getConfig().world.tileSize-1,n.getConfig().world.tileSize-1)},t.prototype.drawPath=function(t,e,i){this.ctx.fillStyle=i.borderFillStyle,this.ctx.fillRect(t,e,n.getConfig().world.tileSize,n.getConfig().world.tileSize),this.ctx.beginPath(),this.ctx.fillStyle=i.pathFillStyle,this.ctx.fillRect(t+1,e+1,n.getConfig().world.tileSize-1,n.getConfig().world.tileSize-1),this.ctx.stroke()},t.prototype.drawPathId=function(t,e,i){this.ctx.font=n.getConfig().world.theme.path.fontSize+"px Arial",this.ctx.fillStyle="black",this.ctx.fillText(i,t+n.getConfig().world.tileSize/2-10,e+n.getConfig().world.tileSize/2+10)},t.prototype.highlightPathSlowly=function(t,e,i,o,r){var l=this;e<t.length&&setTimeout((function(){l.highlightTile(t[e],o,""+e),l.highlightPathSlowly(t,e+1,i,o),e==t.length-1&&i&&i()}),n.getConfig().algorithm.highlightPathMs)},t.prototype.highlightPathQuickly=function(t,e,i,o,r){for(var n=0;n<t.length;n++)this.highlightTile(t[n],o,""+n);i&&i()},t}(),a=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<i;e++)for(var n=arguments[e],l=0,a=n.length;l<a;l++,r++)o[r]=n[l];return o},h=function(){function t(){this.array=[]}return t.prototype.offer=function(t){this.array.push(t)},t.prototype.poll=function(){return this.array.shift()},t.prototype.peek=function(){return this.array[0]},t.prototype.size=function(){return this.array.length},t.prototype.isEmpty=function(){return this.size()<=0},t.prototype.toArray=function(){return a(this.array)},t}(),s=function(){function t(t){this.logs={traversalPath:[]},this.world=t}return t.prototype.findPath=function(){var t,e=[],i=[];this.resetLogs();var o=new h;return o.offer(this.world.start),console.log("this.world.start",this.world.start),this.composePath(o,((t={})[this.world.start]=this.world.start,t),this.world.tiles,this.world.end,i,e),{route:e,pathsVisited:i}},t.prototype.resetLogs=function(){this.logs={traversalPath:[]}},t.prototype.composePath=function(t,e,i,o,r,n){if(!t.isEmpty()){var l=t.poll();if(r.push(i[l]),l===o)return n.push(i[l]),l;i[l].paths.forEach((function(i){null==e[i]&&(t.offer(i),e[""+i]=i)}));var a=this.composePath(t,e,i,o,r,n);return null!=a&&i[a].paths.includes(l)?(n.push(i[l]),l):a}},t}(),u=function(){function t(){}return t.prototype.generateWorld=function(t,e,i){var o=this.generateTiles(t*e,i);return this.createConnectedWorld(o,t,e)},t.prototype.generateTiles=function(t,e){var i=Math.floor(t*e),o=this.generatePaths(t);this.generateRocks(o,i);var r=Math.floor(Math.random()*t);o[r].type="START";var n=Math.floor(Math.random()*t);return o[n=n==r?(n+3)%t:n].type="END",o},t.prototype.generatePaths=function(t){for(var e=[],i=0;i<t;i++)e.push({type:"PATH"});return e},t.prototype.generateRocks=function(t,e){for(var i=0;i<e;i++){t[Math.floor(Math.random()*(t.length-1))].type="ROCK"}},t.prototype.createConnectedWorld=function(t,e,i){for(var o=this,r=[],n=0,l=0,a=function(e){var a={paths:[],position:e,type:t[e].type};if(r.push(a),"ROCK"===a.type)return"continue";"START"===a.type?n=e:"END"===a.type&&(l=e),["⭠","⭡","⭢","⭣"].forEach((function(r){var n=o.getPosition(t,i,e,r);null!=n&&"ROCK"!=t[n].type&&a.paths.push(n)}))},h=0;h<t.length;h++)a(h);return{columns:e,rows:i,tiles:r,start:n,end:l}},t.prototype.getPosition=function(t,e,i,o){switch(o){case"⭠":return i%e>0?i-1:null;case"⭢":return i<t.length-1&&i%e<e-1?i+1:null;case"⭡":return i-e<0?null:i-e;case"⭣":return i+e>t.length-1?null:i+e}},t}(),f=new(function(){function t(){}return t.prototype.initialize=function(){var t=document.getElementById("myCanvas");t.height=window.innerHeight-4,t.width=window.innerWidth-4;var e=t.getContext("2d");this.setConfiguration(),this.world=(new u).generateWorld(n.getConfig().world.columns,n.getConfig().world.rows,n.getConfig().world.obstacleRate),this.worldRender=new l(e,this.world),this.pathFinder=new s(this.world),this.worldRender.renderWorld()},t.prototype.setConfiguration=function(){var t=new URLSearchParams(window.location.search);this.setMode(t.get("mode"));var e=t.has("rows")?+t.get("rows"):Math.floor(window.innerWidth/n.getConfig().world.tileSize),i=t.has("columns")?+t.get("columns"):Math.floor(window.innerHeight/n.getConfig().world.tileSize);n.setDimensions(i,e)},t.prototype.setMode=function(t){switch(t){case"skipVisited":n.setSkipVisited();break;case"animate":n.setAnimate();break;case"skipAnimations":n.setSkipAnimations();break;case"skipVisitedAnimation":n.skipVisitedAnimation();break;default:n.setAnimate()}},t.prototype.solve=function(){var t,e=this,i=this.pathFinder.findPath(),o=function(){};if(n.getConfig().algorithm.showRoute){var r=n.getConfig().algorithm.animatePathFromStartToEnd?i.route.reverse():i.route;o=n.getConfig().algorithm.animateRoute?function(){e.worldRender.highlightPathSlowly(r,0,null,n.getConfig().world.theme.route)}:function(){e.worldRender.highlightPathQuickly(r,0,null,n.getConfig().world.theme.route)}}n.getConfig().algorithm.showVisited&&(t=n.getConfig().algorithm.animateVisited?function(){e.worldRender.highlightPathSlowly(i.pathsVisited,0,o,n.getConfig().world.theme.visited)}:function(){e.worldRender.highlightPathQuickly(i.pathsVisited,0,o,n.getConfig().world.theme.visited)}),t?t():o()},t}());f.initialize(),f.solve()}]);